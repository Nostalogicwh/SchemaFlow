# AI模型配置文件
# 支持按场景配置不同的模型，环境变量可覆盖配置值

scenarios:
  # 干预检测场景 - 需要高精度判断
  intervention_detection:
    description: "检测页面是否需要人工干预，如验证码、登录态失效等"
    model:
      provider: "deepseek"
      model: "deepseek-chat"
      api_key: null  # 从环境变量 AI_API_KEY_INTERVENTION_DETECTION 或 LLM_API_KEY 读取
      base_url: "https://api.deepseek.com/v1"
      temperature: 0.1  # 低温度确保判断准确性
      max_tokens: 500
      timeout: 30
      extra_params:
        top_p: 0.1
    fallback_enabled: true
    fallback_models:
      - "gpt-3.5-turbo"
      - "gpt-4"

  # 元素定位场景 - 需要准确理解页面结构
  element_location:
    description: "通过自然语言描述定位页面元素"
    model:
      provider: "deepseek"
      model: "deepseek-chat"
      api_key: null
      base_url: "https://api.deepseek.com/v1"
      temperature: 0.3
      max_tokens: 1000
      timeout: 45
      extra_params:
        top_p: 0.3
    fallback_enabled: true
    fallback_models:
      - "gpt-4"

  # 工作流生成场景 - 需要创造性思维
  workflow_generation:
    description: "根据自然语言描述生成工作流"
    model:
      provider: "deepseek"
      model: "deepseek-chat"
      api_key: null
      base_url: "https://api.deepseek.com/v1"
      temperature: 0.7  # 较高温度增加创造性
      max_tokens: 4000
      timeout: 120
      extra_params:
        top_p: 0.9
    fallback_enabled: true
    fallback_models:
      - "gpt-4"
      - "gpt-3.5-turbo-16k"

  # 代码生成场景 - 需要准确生成可执行代码
  code_generation:
    description: "生成Python代码或JavaScript代码"
    model:
      provider: "deepseek"
      model: "deepseek-coder"
      api_key: null
      base_url: "https://api.deepseek.com/v1"
      temperature: 0.2  # 低温度确保代码准确性
      max_tokens: 2000
      timeout: 60
      extra_params:
        top_p: 0.2
    fallback_enabled: true
    fallback_models:
      - "gpt-4"
      - "gpt-3.5-turbo"

  # 通用任务场景 - 平衡的配置
  general:
    description: "通用AI任务，如文本生成、总结等"
    model:
      provider: "deepseek"
      model: "deepseek-chat"
      api_key: null
      base_url: "https://api.deepseek.com/v1"
      temperature: 0.5
      max_tokens: 2000
      timeout: 60
      extra_params:
        top_p: 0.5
    fallback_enabled: true
    fallback_models:
      - "gpt-3.5-turbo"

# 全局设置
global:
  # 默认场景，当未指定场景时使用
  default_scenario: "general"
  
  # 请求重试配置
  retry:
    max_attempts: 3
    backoff_factor: 2
    max_wait_time: 60
  
  # 日志配置
  logging:
    level: "INFO"
    log_requests: true
    log_responses: false